# ALI Agent v2: Advanced Personal Styling AI

## üåü Overview
**ALI (Artificial Lifestyle Intelligence)** is a next-generation personal stylist agent designed to provide hyper-personalized fashion advice. Unlike simple chatbots, ALI v2 is a **Multi-Agent System** that "thinks" before it speaks, routing user requests to specialized experts while maintaining a consistent, warm persona.

This prototype demonstrates **Agentic Workflow** capabilities, moving beyond simple Q&A to a system that understands context (Outfit of the Day, Weather, User History) and proactively assists the user.

---

## üèóÔ∏è System Architecture
The system is built on **LangGraph**, a framework for building stateful, multi-actor applications with LLMs.

### The "Brain": Hub & Spoke Model
Instead of one giant prompt doing everything, we use a **Hub & Spoke** architecture:

1.  **Orchestrator (The Hub)**:
    *   **Role**: The "Face" of ALI. It never answers styling questions directly.
    *   **Function**: It analyzes the user's intent, routes it to the correct expert, and then **composes** the expert's technical answer into a friendly, empathetic response.
    *   **Technique**: *Chain-of-Thought Routing* and *Persona Injection*.

2.  **Specialized Sub-Agents (The Spokes)**:
    *   **Occasion & Formality Agent**: Expert in dress codes (Weddings, Work, Date Night). Knows how to "dress up" or "dress down" an outfit.
    *   **Item Styling Agent**: Specializes in versatility (e.g., "3 ways to wear this blazer").
    *   **Color Intelligence Agent**: Understands color theory, seasonal palettes, and outfit harmony.
    *   **Temperature & Weather Agent**: Analyzes weather data to suggest layering and fabric choices.

---

## üß† Key AI Techniques Used

### 1. Context Engineering & Selective Passing
We don't dump all data into every prompt (which confuses LLMs). We use **Selective Context**:
*   *The Color Agent* sees the Outfit + User Palette, but NOT the weather (irrelevant).
*   *The Weather Agent* sees the Temperature + Outfit, but NOT the color palette.
*   **Benefit**: Higher accuracy and lower token costs.

### 2. Long-Term Memory & Persistence (Firestore)
ALI remembers users across sessions.
*   **Technique**: We use **Firebase Firestore** to store a "Summary" of the user's preferences.
*   **Workflow**: When a user mentions a preference (e.g., "I love emerald green"), it is captured. If they return days later, ALI retrieves this summary to personalize the greeting and advice.

### 3. Context Compression (Summarization)
To keep the "brain" fast and efficient, we don't feed the entire chat history forever.
*   **Technique**: After every **10 messages**, the Orchestrator triggers a background process to **summarize** the conversation.
*   **Benefit**: Allows for infinite conversation length without hitting token limits or confusing the AI.

### 4. Dynamic Context Injection
The system dynamically injects real-time data into the agent's prompt at runtime:
*   **OOTD (Outfit of the Day)**: Fetched from the database based on the selected date.
*   **Weather**: Real-time weather data based on the user's location.

---

## üöÄ How to Demo / Test

### 1. The Interface
*   **Sidebar**: This is your "Control Center".
    *   **User ID**: Change this to switch personas (e.g., `test_user`, `test_demo`). Watch the memory reload instantly!
    *   **OOTD Date**: Select a date (currently supports 2025-11-27 to 2025-11-30) to load a different "Outfit of the Day" context.
    *   **Location**: Change the city to test Weather adaptation.
    *   **üõ†Ô∏è Context Debugger**: Expand this to see the "Brain" in action (Raw JSON, Memory Summary, Message Counts).

### 2. Recommended Test Flows

**Scenario A: The "Work" Flow (Occasion Agent)**
> *User*: "I need an outfit for work."
> *ALI*: "What's your dress code?" (Agent asks clarifying question)
> *User*: "Business casual, no jeans."
> *ALI*: (Provides specific recommendation based on the current OOTD)

**Scenario B: The "Memory" Flow (Persistence)**
> *User*: "My favorite color is emerald green."
> *Action*: Switch User ID to `guest`, then switch back to `default_user`.
> *User*: "What is my favorite color?"
> *ALI*: "It's emerald green! üåø" (Retrieved from Firestore)

**Scenario C: The "Weather" Flow (Dynamic Context)**
> *Action*: Set Location to "London" (Rainy/Cold).
> *User*: "What should I wear?"
> *ALI*: (Suggests a trench coat or layers based on the live weather data)

### 3. Verifying Memories in Firebase
To see the "Brain" storing data in real-time:
1.  Go to the **Firebase Console** > **Firestore Database**.
2.  Navigate to the `memory` collection.
3.  Look for the document ID: `users::<user_id>` (e.g., `users::test_user`).
4.  The `value` field contains the **summary** generated by the Orchestrator.

---

## üõ†Ô∏è Tech Stack
*   **Framework**: LangChain & LangGraph
*   **LLM**: OpenAI GPT-4o-mini
*   **Frontend**: Streamlit
*   **Database**: Google Firebase Firestore
*   **Language**: Python 3.11+
